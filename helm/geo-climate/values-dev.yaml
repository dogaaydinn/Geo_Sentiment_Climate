# Development Environment Values
# Override default values for local/development deployment
#
# Usage:
#   helm install geo-climate ./helm/geo-climate \
#     --namespace geo-climate-dev \
#     --create-namespace \
#     --values ./helm/geo-climate/values-dev.yaml

# Global settings
global:
  namespace: geo-climate-dev
  environment: development

# Application configuration
app:
  name: geo-climate
  version: "2.0.0-dev"

# API deployment
api:
  replicaCount: 1  # Reduced for dev

  image:
    repository: ghcr.io/dogaaydinn/geo_sentiment_climate
    tag: dev
    pullPolicy: Always

  service:
    type: ClusterIP  # No LoadBalancer in dev
    port: 80
    targetPort: 8000
    metricsPort: 9090

  resources:
    requests:
      memory: "512Mi"  # Reduced for dev
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

  autoscaling:
    enabled: false  # Disabled in dev

  livenessProbe:
    httpGet:
      path: /health/live
      port: 8000
    initialDelaySeconds: 10  # Faster startup in dev
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /health/ready
      port: 8000
    initialDelaySeconds: 5
    periodSeconds: 5

  # Development-specific environment variables
  env:
    - name: LOG_LEVEL
      value: "DEBUG"
    - name: ENVIRONMENT
      value: "development"
    - name: DEBUG
      value: "true"
    - name: ENABLE_CORS
      value: "true"
    - name: ENABLE_PROFILING
      value: "true"

# PostgreSQL database
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: 15-alpine

  auth:
    database: geo_climate_dev
    username: postgres
    password: dev-password-123  # Simple password for dev

  primary:
    persistence:
      enabled: true
      size: 5Gi  # Smaller in dev
      storageClass: standard

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "1Gi"
        cpu: "500m"

# Redis cache
redis:
  enabled: true
  image:
    repository: redis
    tag: 7-alpine

  master:
    persistence:
      enabled: false  # No persistence in dev
      size: 1Gi
      storageClass: standard

    resources:
      requests:
        memory: "128Mi"
        cpu: "50m"
      limits:
        memory: "512Mi"
        cpu: "200m"

  auth:
    enabled: false  # No auth in dev for simplicity

# Persistent storage
persistence:
  models:
    enabled: true
    size: 10Gi  # Smaller in dev
    storageClass: standard
    accessMode: ReadWriteOnce  # Simplified for dev

  data:
    enabled: true
    size: 20Gi
    storageClass: standard
    accessMode: ReadWriteOnce

# Ingress - Disabled in dev (use port-forward instead)
ingress:
  enabled: false

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: geo-climate-sa

# Security Context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Configuration
config:
  logLevel: DEBUG
  apiWorkers: 2  # Fewer workers in dev
  modelRegistryPath: /models
  modelCacheSize: 2  # Smaller cache in dev

# Secrets (dev values - NOT FOR PRODUCTION)
secrets:
  jwtSecretKey: "dev-jwt-secret-key-not-for-production"
  defaultApiKey: "dev-api-key-123"

# Monitoring - Simplified for dev
monitoring:
  prometheus:
    enabled: true
    port: 9090

  grafana:
    enabled: false  # Optional in dev

# Node selector - None for dev
nodeSelector: {}

# Tolerations - None for dev
tolerations: []

# Affinity - Disabled in dev
affinity: {}

# Additional dev-specific settings
dev:
  # Enable hot-reload
  hotReload: true

  # Enable debug endpoints
  debugEndpoints: true

  # Skip database migrations (useful for testing)
  skipMigrations: false

  # Seed database with test data
  seedDatabase: true

  # Mock external services
  mockExternalServices: false
